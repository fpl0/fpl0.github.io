---
/**
 * BlogPostSchema - JSON-LD structured data for blog posts
 * Outputs schema.org BlogPosting markup for rich search results
 */

interface Props {
  title: string;
  description: string;
  datePublished: Date;
  dateModified?: Date;
  url: string;
  image?: string;
}

const { title, description, datePublished, dateModified, url, image } = Astro.props;

const fallbackImage = "https://fpl0.github.io/favicon.svg";
const schemaImage = image || fallbackImage;

const schema = {
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  headline: title,
  description: description,
  datePublished: datePublished.toISOString(),
  dateModified: (dateModified ?? datePublished).toISOString(),
  url: url,
  image: schemaImage,
  author: {
    "@type": "Person",
    name: "Filipe",
    url: "https://fpl0.github.io/about",
  },
  publisher: {
    "@type": "Person",
    name: "Filipe",
  },
  mainEntityOfPage: {
    "@type": "WebPage",
    "@id": url,
  },
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
