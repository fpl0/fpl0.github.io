---
/**
 * Home Page - Unified feed of blog posts and apps
 */

import Layout from "../layouts/Layout.astro";
import "../styles/home.css";
import "../styles/apps.css";
import AppCard from "../components/AppCard.astro";
import PageHeader from "../components/PageHeader.astro";
import PostCard from "../components/PostCard.astro";
import { getFeedItems } from "../utils/feed";

const feedItems = await getFeedItems();
---

<Layout title="Home | fpl0">
  <PageHeader />
  <blockquote class="bio-quote">
    <p>"True delight is in the finding out rather than in the knowing."</p>
    <cite>Isaac Asimov</cite>
  </blockquote>
  <main id="main-content" class="home-main">
    {feedItems.length > 0 ? (
      <section class="archive">
        <ul class="post-list">
          {feedItems.map((item) =>
            item.type === "post" ? (
              <PostCard post={item.entry} />
            ) : (
              <AppCard app={item.entry} />
            )
          )}
        </ul>
      </section>
    ) : (
      <section class="empty-state">
        <p class="empty-greeting">Hello, World!</p>
      </section>
    )}
  </main>
</Layout>
